<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RHNGUI Components - Web Components Example (Loaded in iframe)</title>
  
  <!-- Include PatternFly styles from CDN (minified) -->
  <link rel="stylesheet" href="https://unpkg.com/@patternfly/patternfly@6/patternfly.min.css">
  
  <!-- Include RHNGUI component styles -->
  <link rel="stylesheet" href="../webcomponents/rhngui-webcomponents.css?v=1763997795113">
  
  <!-- Include the web components bundle -->
  <!-- Note: Update the ?v= parameter when rebuilding to bust browser cache -->
  <script type="module" src="../webcomponents/rhngui-webcomponents.js?v=1763997795113"></script>
  
  <!-- Include example styles -->
  <link rel="stylesheet" href="examples.css">
</head>
<body>
  <h1>RHNGUI Components - Web Components Example</h1>
  <p><em>Note: This example is loaded in an iframe within the demo app.</em></p>
  <p>This page demonstrates how to use RHNGUI components as native Web Components (Custom Elements) in any HTML page.</p>
  <p>No JavaScript framework required! Just use <code>&lt;rhngui-*&gt;</code> tags directly in your HTML.</p>
  
  <!-- Documentation will be injected here -->
  <div id="docs-container"></div>
  
  <div style="margin: 20px 0;">
    <button onclick="updateChart()">Update Chart to Line</button>
    <button onclick="resetChart()">Reset Chart to Bar</button>
    <button onclick="toggleChartScale()">Toggle Chart Scale</button>
    <button onclick="removeChart()">Remove Chart</button>
    <button onclick="addChart()">Add Chart Back</button>
  </div>

  <!-- Use custom HTML elements directly -->
  <div class="container">
    <h2>Chart Component - <code>&lt;rhngui-chart&gt;</code></h2>
    <div id="chart-wrapper">
      <rhngui-chart
        id="sales-chart"
        title="Quarterly Sales"
        chart-type="bar"
        width="700"
        height="400"
        theme-color="multi"
        legend-position="bottom"
        data='[
          {
            "name": "Product A",
            "data": [
              {"x": "Q1", "y": 30000},
              {"x": "Q2", "y": 45000},
              {"x": "Q3", "y": 60000},
              {"x": "Q4", "y": 55000}
            ]
          },
          {
            "name": "Product B",
            "data": [
              {"x": "Q1", "y": 25000},
              {"x": "Q2", "y": 35000},
              {"x": "Q3", "y": 40000},
              {"x": "Q4", "y": 50000}
            ]
          }
        ]'
      ></rhngui-chart>
    </div>
    <div class="code-toggle" onclick="toggleCode('code-chart')">
      <span>HTML Markup</span>
      <span class="arrow">▶</span>
    </div>
    <div class="code-content" id="code-chart">
      <pre><code id="code-chart-content"></code></pre>
    </div>
  </div>

  <div class="container">
    <h2>Table Component - <code>&lt;rhngui-table&gt;</code></h2>
    <rhngui-table
      id="users-table"
      title="User List"
      fields='[
        {"name": "Name", "data_path": "user.name", "data": ["Alice", "Bob", "Carol", "Dave"]},
        {"name": "Email", "data_path": "user.email", "data": ["alice@example.com", "bob@example.com", "carol@example.com", "dave@example.com"]},
        {"name": "Role", "data_path": "user.role", "data": ["Admin", "User", "Manager", "User"]}
      ]'
    ></rhngui-table>
    <div class="code-toggle" onclick="toggleCode('code-table')">
      <span>HTML Markup</span>
      <span class="arrow">▶</span>
    </div>
    <div class="code-content" id="code-table">
      <pre><code id="code-table-content"></code></pre>
    </div>
  </div>

  <div class="container">
    <h2>Image Component - <code>&lt;rhngui-image&gt;</code></h2>
    <rhngui-image
      id="logo"
      image="https://www.patternfly.org/images/f18506f4.svg"
      title="PatternFly Logo"
    ></rhngui-image>
    <div class="code-toggle" onclick="toggleCode('code-image')">
      <span>HTML Markup</span>
      <span class="arrow">▶</span>
    </div>
    <div class="code-content" id="code-image">
      <pre><code id="code-image-content"></code></pre>
    </div>
  </div>

  <div class="container">
    <h2>Card Component - <code>&lt;rhngui-card&gt;</code></h2>
    <rhngui-card
      id="server-card"
      title="Server Information"
      image="https://avatars.githubusercontent.com/u/6391110?v=4"
      image-size="md"
      fields='[
        {"name": "Hostname", "data_path": "server.name", "data": ["server-01.example.com"]},
        {"name": "IP Address", "data_path": "server.ip", "data": ["192.168.1.100"]},
        {"name": "Status", "data_path": "server.status", "data": ["Running"]},
        {"name": "Uptime", "data_path": "server.uptime", "data": ["45 days"]}
      ]'
    ></rhngui-card>
    <div class="code-toggle" onclick="toggleCode('code-card')">
      <span>HTML Markup</span>
      <span class="arrow">▶</span>
    </div>
    <div class="code-content" id="code-card">
      <pre><code id="code-card-content"></code></pre>
    </div>
  </div>

  <div class="container">
    <h2>Multiple Components Together</h2>
    <rhngui-image
      id="small-logo"
      image="https://www.patternfly.org/images/f18506f4.svg"
      title="Small Logo"
    ></rhngui-image>
    <rhngui-card
      id="stats-card"
      title="Quick Stats"
      fields='[
        {"name": "Active Users", "data_path": "stats.users", "data": ["1,234"]},
        {"name": "Total Revenue", "data_path": "stats.revenue", "data": ["$45,678"]},
        {"name": "Orders Today", "data_path": "stats.orders", "data": ["89"]}
      ]'
    ></rhngui-card>
    <div class="code-toggle" onclick="toggleCode('code-multi')">
      <span>HTML Markup</span>
      <span class="arrow">▶</span>
    </div>
    <div class="code-content" id="code-multi">
      <pre><code id="code-multi-content"></code></pre>
    </div>
  </div>

  <div class="container">
    <h2>Large Numbers Chart Example</h2>
    <rhngui-chart
      id="large-numbers-chart"
      title="Global User Growth"
      chart-type="line"
      width="800"
      height="400"
      theme-color="blue"
      legend-position="right"
      data='[
        {
          "name": "Platform A",
          "data": [
            {"x": 2020, "y": 850000000},
            {"x": 2021, "y": 1200000000},
            {"x": 2022, "y": 1750000000},
            {"x": 2023, "y": 2300000000}
          ]
        },
        {
          "name": "Platform B",
          "data": [
            {"x": 2020, "y": 450000000},
            {"x": 2021, "y": 675000000},
            {"x": 2022, "y": 925000000},
            {"x": 2023, "y": 1250000000}
          ]
        }
      ]'
    ></rhngui-chart>
    <div class="code-toggle" onclick="toggleCode('code-large')">
      <span>HTML Markup</span>
      <span class="arrow">▶</span>
    </div>
    <div class="code-content" id="code-large">
      <pre><code id="code-large-content"></code></pre>
    </div>
  </div>

  <!-- Load documentation -->
  <script type="module">
    import { loadWebComponentsDocs } from './webcomponents-docs.js';
    // Load documentation as soon as possible
    loadWebComponentsDocs('docs-container');
  </script>

  <script>
    // Toggle code visibility
    function toggleCode(id) {
      const content = document.getElementById(id);
      const toggle = content.previousElementSibling;
      content.classList.toggle('show');
      toggle.classList.toggle('expanded');
    }

    // Populate code displays with HTML markup
    function populateCodeDisplays() {
      // Chart HTML
      document.getElementById('code-chart-content').textContent = 
`<rhngui-chart
  id="sales-chart"
  title="Quarterly Sales"
  chart-type="bar"
  width="700"
  height="400"
  theme-color="multi"
  legend-position="bottom"
  data='[{...}]'
></rhngui-chart>`;

      // Table HTML
      document.getElementById('code-table-content').textContent = 
`<rhngui-table
  id="users-table"
  title="User List"
  fields='[
    {"name": "Name", "data_path": "user.name", "data": ["Alice", "Bob", "Carol", "Dave"]},
    {"name": "Email", "data_path": "user.email", "data": ["alice@...", "bob@..."]},
    {"name": "Role", "data_path": "user.role", "data": ["Admin", "User", "Manager", "User"]}
  ]'
></rhngui-table>`;

      // Image HTML
      document.getElementById('code-image-content').textContent = 
`<rhngui-image
  id="logo"
  image="https://www.patternfly.org/images/f18506f4.svg"
  title="PatternFly Logo"
></rhngui-image>`;

      // Card HTML
      document.getElementById('code-card-content').textContent = 
`<rhngui-card
  id="server-card"
  title="Server Information"
  image="https://www.patternfly.org/images/f18506f4.svg"
  image-size="md"
  fields='[
    {"name": "Hostname", "data_path": "server.name", "data": ["server-01.example.com"]},
    {"name": "IP Address", "data_path": "server.ip", "data": ["192.168.1.100"]},
    {"name": "Status", "data_path": "server.status", "data": ["Running"]},
    {"name": "Uptime", "data_path": "server.uptime", "data": ["45 days"]}
  ]'
></rhngui-card>`;

      // Multiple components HTML
      document.getElementById('code-multi-content').textContent = 
`<rhngui-image
  id="small-logo"
  image="https://www.patternfly.org/images/f18506f4.svg"
  title="Small Logo"
></rhngui-image>

<rhngui-card
  id="stats-card"
  title="Quick Stats"
  fields='[
    {"name": "Active Users", "data_path": "stats.users", "data": ["1,234"]},
    {"name": "Total Revenue", "data_path": "stats.revenue", "data": ["$45,678"]},
    {"name": "Orders Today", "data_path": "stats.orders", "data": ["89"]}
  ]'
></rhngui-card>`;

      // Large numbers chart HTML
      document.getElementById('code-large-content').textContent = 
`<rhngui-chart
  id="large-numbers-chart"
  title="Global User Growth"
  chart-type="line"
  width="800"
  height="400"
  theme-color="blue"
  legend-position="right"
  data='[
    {
      "name": "Platform A",
      "data": [
        {"x": 2020, "y": 850000000},
        {"x": 2021, "y": 1200000000},
        {"x": 2022, "y": 1750000000},
        {"x": 2023, "y": 2300000000}
      ]
    },
    {
      "name": "Platform B",
      "data": [
        {"x": 2020, "y": 450000000},
        {"x": 2021, "y": 675000000},
        {"x": 2022, "y": 925000000},
        {"x": 2023, "y": 1250000000}
      ]
    }
  ]'
></rhngui-chart>`;
    }

    // Initialize code displays
    populateCodeDisplays();

    // JavaScript can still manipulate web components using standard DOM APIs
    function updateChart() {
      const chart = document.querySelector('#sales-chart');
      if (chart) {
        chart.setAttribute('chart-type', 'line');
        chart.setAttribute('title', 'Updated Sales Data (Line Chart)');
        chart.setAttribute('theme-color', 'blue');
        chart.setAttribute('legend-position', 'right');
        chart.setAttribute('data', JSON.stringify([
          {
            name: "Product A",
            data: [
              {x: "Q1", y: 35000},
              {x: "Q2", y: 50000},
              {x: "Q3", y: 65000},
              {x: "Q4", y: 70000}
            ]
          },
          {
            name: "Product B",
            data: [
              {x: "Q1", y: 28000},
              {x: "Q2", y: 40000},
              {x: "Q3", y: 48000},
              {x: "Q4", y: 55000}
            ]
          }
        ]));
      }
    }

    function resetChart() {
      const chart = document.querySelector('#sales-chart');
      if (chart) {
        chart.setAttribute('chart-type', 'bar');
        chart.setAttribute('title', 'Quarterly Sales');
        chart.setAttribute('theme-color', 'multi');
        chart.setAttribute('legend-position', 'bottom');
        chart.setAttribute('data', JSON.stringify([
          {
            name: "Product A",
            data: [
              {x: "Q1", y: 30000},
              {x: "Q2", y: 45000},
              {x: "Q3", y: 60000},
              {x: "Q4", y: 55000}
            ]
          },
          {
            name: "Product B",
            data: [
              {x: "Q1", y: 25000},
              {x: "Q2", y: 35000},
              {x: "Q3", y: 40000},
              {x: "Q4", y: 50000}
            ]
          }
        ]));
      }
    }

    let isScaled = false;
    function toggleChartScale() {
      const chart = document.querySelector('#sales-chart');
      if (chart) {
        isScaled = !isScaled;
        chart.setAttribute('scale', isScaled ? '0.7' : '1');
      }
    }

    function removeChart() {
      const chart = document.querySelector('#sales-chart');
      if (chart) {
        chart.remove();
      }
    }

    function addChart() {
      const wrapper = document.getElementById('chart-wrapper');
      if (wrapper && !wrapper.querySelector('rhngui-chart')) {
        const chart = document.createElement('rhngui-chart');
        chart.setAttribute('id', 'sales-chart');
        chart.setAttribute('title', 'Quarterly Sales');
        chart.setAttribute('chart-type', 'bar');
        chart.setAttribute('width', '700');
        chart.setAttribute('height', '400');
        chart.setAttribute('theme-color', 'multi');
        chart.setAttribute('legend-position', 'bottom');
        chart.setAttribute('data', JSON.stringify([
          {
            name: "Product A",
            data: [
              {x: "Q1", y: 30000},
              {x: "Q2", y: 45000},
              {x: "Q3", y: 60000},
              {x: "Q4", y: 55000}
            ]
          },
          {
            name: "Product B",
            data: [
              {x: "Q1", y: 25000},
              {x: "Q2", y: 35000},
              {x: "Q3", y: 40000},
              {x: "Q4", y: 50000}
            ]
          }
        ]));
        wrapper.appendChild(chart);
      }
    }
  </script>
</body>
</html>

