<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RHNGUI Components - Standalone Example (Loaded in iframe)</title>
  
  <!-- Include React (required peer dependencies) -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  
  <!-- Include PatternFly styles from CDN (minified) -->
  <link rel="stylesheet" href="https://unpkg.com/@patternfly/patternfly@6/patternfly.min.css">
  
  <!-- Include the standalone bundle -->
  <!-- Note: Update the ?v= parameter when rebuilding to bust browser cache -->
  <script src="../standalone/rhngui-standalone.iife.js?v=1761679526337"></script>
  
  <style>
    body {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      background: #f5f5f5;
    }
    h1 {
      color: #333;
    }
    .container {
      background: white;
      padding: 20px;
      margin: 20px 0;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    button {
      background: #0066cc;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 4px;
      cursor: pointer;
      margin: 5px;
      font-size: 14px;
    }
    button:hover {
      background: #0052a3;
    }
    code {
      background: #f0f0f0;
      padding: 2px 6px;
      border-radius: 3px;
      font-family: 'Courier New', monospace;
      font-size: 13px;
    }
    .code-toggle {
      margin-top: 16px;
      background: #f5f5f5;
      border: 1px solid #d2d2d2;
      padding: 10px 16px;
      cursor: pointer;
      border-radius: 4px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-weight: 600;
      color: #151515;
    }
    .code-toggle:hover {
      background: #e7e7e7;
    }
    .code-toggle .arrow {
      transition: transform 0.2s;
    }
    .code-toggle.expanded .arrow {
      transform: rotate(90deg);
    }
    .code-content {
      display: none;
      margin-top: 8px;
      background: #f5f5f5;
      border: 1px solid #d2d2d2;
      border-radius: 4px;
      padding: 16px;
    }
    .code-content.show {
      display: block;
    }
    .code-content pre {
      margin: 0;
      font-size: 13px;
      overflow-x: auto;
    }
  </style>
</head>
<body>
  <h1>RHNGUI Components - Standalone Bundle Example</h1>
  <p><em>Note: This example is loaded in an iframe within the demo app.</em></p>
  <p>This page demonstrates how to use RHNGUI components in a non-React application using the standalone bundle.</p>
  
  <div style="background: white; padding: 20px; margin: 20px 0; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
    <h2>ðŸ“š Basic Usage</h2>
    <pre style="background: #f5f5f5; padding: 15px; border-radius: 4px; overflow-x: auto;"><code>&lt;!-- 1. Include React dependencies --&gt;
&lt;script src="https://unpkg.com/react@18/umd/react.production.min.js"&gt;&lt;/script&gt;
&lt;script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"&gt;&lt;/script&gt;

&lt;!-- 2. Include PatternFly styles --&gt;
&lt;link rel="stylesheet" href="https://unpkg.com/@patternfly/patternfly@6/patternfly.min.css"&gt;

&lt;!-- 3. Include RHNGUI standalone bundle --&gt;
&lt;script src="dist/standalone/rhngui-standalone.iife.js"&gt;&lt;/script&gt;

&lt;!-- 4. Use the API --&gt;
&lt;div id="my-chart"&gt;&lt;/div&gt;
&lt;script&gt;
  const renderer = window.RHNGUIRenderer;
  
  const chart = renderer.render('my-chart', {
    component: 'chart',
    key: 'chart-1',
    props: {
      id: 'sales',
      title: 'Sales Data',
      chartType: 'bar',
      data: [{ name: 'Q1', data: [{ x: 'Jan', y: 1000 }] }],
      width: 600,
      height: 400
    }
  });
  
  // Update later: chart.update({ /* new config */ });
  // Clean up: chart.unmount();
&lt;/script&gt;</code></pre>
    <p style="margin-top: 10px; color: #666; font-size: 14px;">
      <strong>ðŸ’¡ Key Benefits:</strong> JavaScript API with full control, smaller bundle size, React as peer dependency!
    </p>
  </div>

  <div class="container">
    <h2>ðŸ“– API Reference</h2>
    
    <!-- render method -->
    <div style="border-left: 4px solid #0066cc; padding-left: 16px; margin: 24px 0;">
      <h3 style="margin-top: 0; color: #0066cc; font-family: 'Courier New', monospace;">
        RHNGUIRenderer.render(containerId, config)
      </h3>
      <p style="margin: 8px 0; font-size: 15px;">Renders a single component into a container.</p>
      
      <div style="margin: 12px 0;">
        <strong>Parameters:</strong>
        <ul style="margin: 8px 0; padding-left: 20px;">
          <li><code>containerId</code> <em>(string)</em> - DOM element ID where component will be mounted</li>
          <li><code>config</code> <em>(object)</em> - Component configuration:
            <ul style="margin-top: 4px;">
              <li><code>component</code> - Component type</li>
              <li><code>key</code> - Unique identifier</li>
              <li><code>props</code> - Component-specific properties</li>
            </ul>
          </li>
        </ul>
      </div>
      
      <div style="margin: 12px 0;">
        <strong>Returns:</strong> <code>{ update(config), unmount() }</code>
      </div>
      
      <div style="margin: 12px 0;">
        <strong>Example:</strong>
        <pre style="background: #f5f5f5; padding: 12px; border-radius: 4px; margin-top: 8px; overflow-x: auto;"><code>const instance = renderer.render('my-container', {
  component: 'chart',
  key: 'chart-1',
  props: {
    id: 'sales',
    title: 'Sales Data',
    chartType: 'bar',
    data: [{ name: 'Q1', data: [...] }]
  }
});

// Update the component
instance.update({ props: { title: 'Updated Title' } });

// Remove the component
instance.unmount();</code></pre>
      </div>
    </div>

    <!-- renderMultiple method -->
    <div style="border-left: 4px solid #0066cc; padding-left: 16px; margin: 24px 0;">
      <h3 style="margin-top: 0; color: #0066cc; font-family: 'Courier New', monospace;">
        RHNGUIRenderer.renderMultiple(containerId, configs[])
      </h3>
      <p style="margin: 8px 0; font-size: 15px;">Renders multiple components into a single container.</p>
      
      <div style="margin: 12px 0;">
        <strong>Parameters:</strong>
        <ul style="margin: 8px 0; padding-left: 20px;">
          <li><code>containerId</code> <em>(string)</em> - DOM element ID</li>
          <li><code>configs</code> <em>(array)</em> - Array of configuration objects</li>
        </ul>
      </div>
      
      <div style="margin: 12px 0;">
        <strong>Returns:</strong> <code>{ unmountAll() }</code>
      </div>
    </div>

    <!-- unmount method -->
    <div style="border-left: 4px solid #0066cc; padding-left: 16px; margin: 24px 0;">
      <h3 style="margin-top: 0; color: #0066cc; font-family: 'Courier New', monospace;">
        RHNGUIRenderer.unmount(containerId)
      </h3>
      <p style="margin: 8px 0; font-size: 15px;">Unmounts a specific component by container ID.</p>
      
      <div style="margin: 12px 0;">
        <strong>Parameters:</strong>
        <ul style="margin: 8px 0; padding-left: 20px;">
          <li><code>containerId</code> <em>(string)</em> - DOM element ID to unmount</li>
        </ul>
      </div>
    </div>

    <!-- unmountAll method -->
    <div style="border-left: 4px solid #0066cc; padding-left: 16px; margin: 24px 0;">
      <h3 style="margin-top: 0; color: #0066cc; font-family: 'Courier New', monospace;">
        RHNGUIRenderer.unmountAll()
      </h3>
      <p style="margin: 8px 0; font-size: 15px;">Unmounts all components managed by the renderer.</p>
    </div>

    <!-- Available components -->
    <div style="background: #f0f7ff; border: 1px solid #c7e0f4; border-radius: 4px; padding: 16px; margin-top: 24px;">
      <h3 style="margin-top: 0; color: #002952;">Available Components</h3>
      <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px;">
        <div><code style="background: white; padding: 4px 8px; border-radius: 3px; display: inline-block;">chart</code></div>
        <div><code style="background: white; padding: 4px 8px; border-radius: 3px; display: inline-block;">table</code></div>
        <div><code style="background: white; padding: 4px 8px; border-radius: 3px; display: inline-block;">image</code></div>
        <div><code style="background: white; padding: 4px 8px; border-radius: 3px; display: inline-block;">one-card</code></div>
        <div><code style="background: white; padding: 4px 8px; border-radius: 3px; display: inline-block;">set-of-cards</code></div>
        <div><code style="background: white; padding: 4px 8px; border-radius: 3px; display: inline-block;">video-player</code></div>
      </div>
    </div>
  </div>
  
  <div style="margin: 20px 0;">
    <button onclick="updateChart()">Update Chart to Line</button>
    <button onclick="resetChart()">Reset Chart to Bar</button>
    <button onclick="unmountAll()">Remove All Components</button>
    <button onclick="remountAll()">Re-mount All Components</button>
  </div>

  <!-- Containers for React components -->
  <div class="container">
    <h2>Chart Component</h2>
    <div id="chart-container"></div>
    <div class="code-toggle" onclick="toggleCode('code-chart')">
      <span>Configuration</span>
      <span class="arrow">â–¶</span>
    </div>
    <div class="code-content" id="code-chart">
      <pre><code id="code-chart-content"></code></pre>
    </div>
  </div>

  <div class="container">
    <h2>Table Component</h2>
    <div id="table-container"></div>
    <div class="code-toggle" onclick="toggleCode('code-table')">
      <span>Configuration</span>
      <span class="arrow">â–¶</span>
    </div>
    <div class="code-content" id="code-table">
      <pre><code id="code-table-content"></code></pre>
    </div>
  </div>

  <div class="container">
    <h2>Image Component</h2>
    <div id="image-container"></div>
    <div class="code-toggle" onclick="toggleCode('code-image')">
      <span>Configuration</span>
      <span class="arrow">â–¶</span>
    </div>
    <div class="code-content" id="code-image">
      <pre><code id="code-image-content"></code></pre>
    </div>
  </div>

  <div class="container">
    <h2>Card Component</h2>
    <div id="card-container"></div>
    <div class="code-toggle" onclick="toggleCode('code-card')">
      <span>Configuration</span>
      <span class="arrow">â–¶</span>
    </div>
    <div class="code-content" id="code-card">
      <pre><code id="code-card-content"></code></pre>
    </div>
  </div>

  <div class="container">
    <h2>Multiple Components in One Container</h2>
    <div id="multi-container"></div>
    <div class="code-toggle" onclick="toggleCode('code-multi')">
      <span>Configuration</span>
      <span class="arrow">â–¶</span>
    </div>
    <div class="code-content" id="code-multi">
      <pre><code id="code-multi-content"></code></pre>
    </div>
  </div>

  <script>
    // Access the global renderer
    const renderer = window.RHNGUIRenderer;
    let chartInstance, tableInstance, imageInstance, cardInstance, multiInstance;

    // Toggle code visibility
    function toggleCode(id) {
      const content = document.getElementById(id);
      const toggle = content.previousElementSibling;
      content.classList.toggle('show');
      toggle.classList.toggle('expanded');
    }

    // Configuration objects for display
    const chartConfig = {
      component: 'chart',
      key: 'my-chart',
      props: {
        id: 'sales-chart',
        title: 'Quarterly Sales',
        chartType: 'bar',
        data: [
          {
            name: 'Product A',
            data: [
              { x: 'Q1', y: 30000 },
              { x: 'Q2', y: 45000 },
              { x: 'Q3', y: 60000 },
              { x: 'Q4', y: 55000 }
            ]
          },
          {
            name: 'Product B',
            data: [
              { x: 'Q1', y: 25000 },
              { x: 'Q2', y: 35000 },
              { x: 'Q3', y: 40000 },
              { x: 'Q4', y: 50000 }
            ]
          }
        ],
        width: 700,
        height: 400,
        themeColor: 'multi',
        legendPosition: 'bottom'
      }
    };

    const tableConfig = {
      component: 'table',
      key: 'my-table',
      props: {
        id: 'users-table',
        title: 'User List',
        fields: [
          { name: 'Name', data_path: 'user.name', data: ['Alice', 'Bob', 'Carol', 'Dave'] },
          { name: 'Email', data_path: 'user.email', data: ['alice@example.com', 'bob@example.com', 'carol@example.com', 'dave@example.com'] },
          { name: 'Role', data_path: 'user.role', data: ['Admin', 'User', 'Manager', 'User'] }
        ]
      }
    };

    const imageConfig = {
      component: 'image',
      key: 'my-image',
      props: {
        id: 'logo',
        image: 'https://www.patternfly.org/images/f18506f4.svg',
        title: 'PatternFly Logo'
      }
    };

    const cardConfig = {
      component: 'one-card',
      key: 'my-card',
      props: {
        id: 'user-card',
        title: 'Server Information',
        image: 'https://www.patternfly.org/images/f18506f4.svg',
        imageSize: 'md',
        fields: [
          { name: 'Hostname', data_path: 'server.name', data: ['server-01.example.com'] },
          { name: 'IP Address', data_path: 'server.ip', data: ['192.168.1.100'] },
          { name: 'Status', data_path: 'server.status', data: ['Running'] },
          { name: 'Uptime', data_path: 'server.uptime', data: ['45 days'] }
        ]
      }
    };

    const multiConfig = [
      {
        component: 'image',
        key: 'multi-image',
        props: {
          id: 'multi-logo',
          image: 'https://www.patternfly.org/images/f18506f4.svg',
          title: 'Small Logo'
        }
      },
      {
        component: 'one-card',
        key: 'multi-card',
        props: {
          id: 'quick-stats',
          title: 'Quick Stats',
          fields: [
            { name: 'Active Users', data_path: 'stats.users', data: ['1,234'] },
            { name: 'Total Revenue', data_path: 'stats.revenue', data: ['$45,678'] }
          ]
        }
      }
    ];

    // Populate code displays
    function populateCodeDisplays() {
      document.getElementById('code-chart-content').textContent = JSON.stringify(chartConfig, null, 2);
      document.getElementById('code-table-content').textContent = JSON.stringify(tableConfig, null, 2);
      document.getElementById('code-image-content').textContent = JSON.stringify(imageConfig, null, 2);
      document.getElementById('code-card-content').textContent = JSON.stringify(cardConfig, null, 2);
      document.getElementById('code-multi-content').textContent = JSON.stringify(multiConfig, null, 2);
    }

    function mountAll() {
      // Render a chart component
      chartInstance = renderer.render('chart-container', chartConfig);

      // Render a table component
      tableInstance = renderer.render('table-container', tableConfig);

      // Render an image
      imageInstance = renderer.render('image-container', imageConfig);

      // Render a card
      cardInstance = renderer.render('card-container', cardConfig);

      // Render multiple components in one container
      multiInstance = renderer.renderMultiple('multi-container', multiConfig);
    }

    // Update chart data dynamically
    function updateChart() {
      chartInstance.update({
        component: 'chart',
        key: 'my-chart',
        props: {
          id: 'sales-chart',
          title: 'Updated Sales Data (Line Chart)',
          chartType: 'line',
          data: [
            {
              name: 'Product A',
              data: [
                { x: 'Q1', y: 35000 },
                { x: 'Q2', y: 50000 },
                { x: 'Q3', y: 65000 },
                { x: 'Q4', y: 70000 }
              ]
            },
            {
              name: 'Product B',
              data: [
                { x: 'Q1', y: 28000 },
                { x: 'Q2', y: 40000 },
                { x: 'Q3', y: 48000 },
                { x: 'Q4', y: 55000 }
              ]
            }
          ],
          width: 700,
          height: 400,
          themeColor: 'blue',
          legendPosition: 'right'
        }
      });
    }

    function resetChart() {
      chartInstance.update({
        component: 'chart',
        key: 'my-chart',
        props: {
          id: 'sales-chart',
          title: 'Quarterly Sales',
          chartType: 'bar',
          data: [
            {
              name: 'Product A',
              data: [
                { x: 'Q1', y: 30000 },
                { x: 'Q2', y: 45000 },
                { x: 'Q3', y: 60000 },
                { x: 'Q4', y: 55000 }
              ]
            },
            {
              name: 'Product B',
              data: [
                { x: 'Q1', y: 25000 },
                { x: 'Q2', y: 35000 },
                { x: 'Q3', y: 40000 },
                { x: 'Q4', y: 50000 }
              ]
            }
          ],
          width: 700,
          height: 400,
          themeColor: 'multi',
          legendPosition: 'bottom'
        }
      });
    }

    // Cleanup
    function unmountAll() {
      renderer.unmountAll();
    }

    function remountAll() {
      mountAll();
    }

    // Initialize all components on page load
    populateCodeDisplays();
    mountAll();
  </script>
</body>
</html>

