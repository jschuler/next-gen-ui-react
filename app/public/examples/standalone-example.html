<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RHNGUI Components - Standalone Example (Loaded in iframe)</title>
  
  <!-- Include React (required peer dependencies) -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  
  <!-- Include PatternFly styles from CDN (minified) -->
  <link rel="stylesheet" href="https://unpkg.com/@patternfly/patternfly@6/patternfly.min.css">
  
  <!-- Include RHNGUI component styles -->
  <link rel="stylesheet" href="../standalone/rhngui-standalone.css?v=1761709386752">
  
  <!-- Include the standalone bundle -->
  <!-- Note: Update the ?v= parameter when rebuilding to bust browser cache -->
  <script src="../standalone/rhngui-standalone.iife.js?v=1761709386752"></script>
  
  <!-- Include example styles -->
  <link rel="stylesheet" href="examples.css">
</head>
<body>
  <h1>RHNGUI Components - Standalone Bundle Example</h1>
  <p><em>Note: This example is loaded in an iframe within the demo app.</em></p>
  <p>This page demonstrates how to use RHNGUI components in a non-React application using the standalone bundle.</p>
  
  <!-- Documentation will be injected here -->
  <div id="docs-container"></div>
  
  <div style="margin: 20px 0;">
    <button onclick="updateChart()">Update Chart to Line</button>
    <button onclick="resetChart()">Reset Chart to Bar</button>
    <button onclick="unmountAll()">Remove All Components</button>
    <button onclick="remountAll()">Re-mount All Components</button>
  </div>

  <!-- Containers for React components -->
  <div class="container">
    <h2>Chart Component</h2>
    <div id="chart-container"></div>
    <div class="code-toggle" onclick="toggleCode('code-chart')">
      <span>Configuration</span>
      <span class="arrow">▶</span>
    </div>
    <div class="code-content" id="code-chart">
      <pre><code id="code-chart-content"></code></pre>
    </div>
  </div>

  <div class="container">
    <h2>Table Component</h2>
    <div id="table-container"></div>
    <div class="code-toggle" onclick="toggleCode('code-table')">
      <span>Configuration</span>
      <span class="arrow">▶</span>
    </div>
    <div class="code-content" id="code-table">
      <pre><code id="code-table-content"></code></pre>
    </div>
  </div>

  <div class="container">
    <h2>Image Component</h2>
    <div id="image-container"></div>
    <div class="code-toggle" onclick="toggleCode('code-image')">
      <span>Configuration</span>
      <span class="arrow">▶</span>
    </div>
    <div class="code-content" id="code-image">
      <pre><code id="code-image-content"></code></pre>
    </div>
  </div>

  <div class="container">
    <h2>Card Component</h2>
    <div id="card-container"></div>
    <div class="code-toggle" onclick="toggleCode('code-card')">
      <span>Configuration</span>
      <span class="arrow">▶</span>
    </div>
    <div class="code-content" id="code-card">
      <pre><code id="code-card-content"></code></pre>
    </div>
  </div>

  <div class="container">
    <h2>Multiple Components in One Container</h2>
    <div id="multi-container"></div>
    <div class="code-toggle" onclick="toggleCode('code-multi')">
      <span>Configuration</span>
      <span class="arrow">▶</span>
    </div>
    <div class="code-content" id="code-multi">
      <pre><code id="code-multi-content"></code></pre>
    </div>
  </div>

  <!-- Load documentation -->
  <script type="module">
    import { loadStandaloneDocs } from './standalone-docs.js';
    // Load documentation as soon as possible
    loadStandaloneDocs('docs-container');
  </script>

  <script>
    // Access the global renderer
    const renderer = window.RHNGUIRenderer;
    let chartInstance, tableInstance, imageInstance, cardInstance, multiInstance;

    // Toggle code visibility
    function toggleCode(id) {
      const content = document.getElementById(id);
      const toggle = content.previousElementSibling;
      content.classList.toggle('show');
      toggle.classList.toggle('expanded');
    }

    // Configuration objects for display
    const chartConfig = {
      component: 'chart',
      key: 'my-chart',
      props: {
        id: 'sales-chart',
        title: 'Quarterly Sales',
        chartType: 'bar',
        data: [
          {
            name: 'Product A',
            data: [
              { x: 'Q1', y: 30000 },
              { x: 'Q2', y: 45000 },
              { x: 'Q3', y: 60000 },
              { x: 'Q4', y: 55000 }
            ]
          },
          {
            name: 'Product B',
            data: [
              { x: 'Q1', y: 25000 },
              { x: 'Q2', y: 35000 },
              { x: 'Q3', y: 40000 },
              { x: 'Q4', y: 50000 }
            ]
          }
        ],
        width: 700,
        height: 400,
        themeColor: 'multi',
        legendPosition: 'bottom'
      }
    };

    const tableConfig = {
      component: 'table',
      key: 'my-table',
      props: {
        id: 'users-table',
        title: 'User List',
        fields: [
          { name: 'Name', data_path: 'user.name', data: ['Alice', 'Bob', 'Carol', 'Dave'] },
          { name: 'Email', data_path: 'user.email', data: ['alice@example.com', 'bob@example.com', 'carol@example.com', 'dave@example.com'] },
          { name: 'Role', data_path: 'user.role', data: ['Admin', 'User', 'Manager', 'User'] }
        ]
      }
    };

    const imageConfig = {
      component: 'image',
      key: 'my-image',
      props: {
        id: 'logo',
        image: 'https://www.patternfly.org/images/f18506f4.svg',
        title: 'PatternFly Logo'
      }
    };

    const cardConfig = {
      component: 'one-card',
      key: 'my-card',
      props: {
        id: 'user-card',
        title: 'Server Information',
        image: 'https://avatars.githubusercontent.com/u/6391110?v=4',
        imageSize: 'md',
        fields: [
          { name: 'Hostname', data_path: 'server.name', data: ['server-01.example.com'] },
          { name: 'IP Address', data_path: 'server.ip', data: ['192.168.1.100'] },
          { name: 'Status', data_path: 'server.status', data: ['Running'] },
          { name: 'Uptime', data_path: 'server.uptime', data: ['45 days'] }
        ]
      }
    };

    const multiConfig = [
      {
        component: 'image',
        key: 'multi-image',
        props: {
          id: 'multi-logo',
          image: 'https://www.patternfly.org/images/f18506f4.svg',
          title: 'Small Logo'
        }
      },
      {
        component: 'one-card',
        key: 'multi-card',
        props: {
          id: 'quick-stats',
          title: 'Quick Stats',
          fields: [
            { name: 'Active Users', data_path: 'stats.users', data: ['1,234'] },
            { name: 'Total Revenue', data_path: 'stats.revenue', data: ['$45,678'] }
          ]
        }
      }
    ];

    // Populate code displays
    function populateCodeDisplays() {
      document.getElementById('code-chart-content').textContent = JSON.stringify(chartConfig, null, 2);
      document.getElementById('code-table-content').textContent = JSON.stringify(tableConfig, null, 2);
      document.getElementById('code-image-content').textContent = JSON.stringify(imageConfig, null, 2);
      document.getElementById('code-card-content').textContent = JSON.stringify(cardConfig, null, 2);
      document.getElementById('code-multi-content').textContent = JSON.stringify(multiConfig, null, 2);
    }

    function mountAll() {
      // Render a chart component
      chartInstance = renderer.render('chart-container', chartConfig);

      // Render a table component
      tableInstance = renderer.render('table-container', tableConfig);

      // Render an image
      imageInstance = renderer.render('image-container', imageConfig);

      // Render a card
      cardInstance = renderer.render('card-container', cardConfig);

      // Render multiple components in one container
      multiInstance = renderer.renderMultiple('multi-container', multiConfig);
    }

    // Update chart data dynamically
    function updateChart() {
      chartInstance.update({
        component: 'chart',
        key: 'my-chart',
        props: {
          id: 'sales-chart',
          title: 'Updated Sales Data (Line Chart)',
          chartType: 'line',
          data: [
            {
              name: 'Product A',
              data: [
                { x: 'Q1', y: 35000 },
                { x: 'Q2', y: 50000 },
                { x: 'Q3', y: 65000 },
                { x: 'Q4', y: 70000 }
              ]
            },
            {
              name: 'Product B',
              data: [
                { x: 'Q1', y: 28000 },
                { x: 'Q2', y: 40000 },
                { x: 'Q3', y: 48000 },
                { x: 'Q4', y: 55000 }
              ]
            }
          ],
          width: 700,
          height: 400,
          themeColor: 'blue',
          legendPosition: 'right'
        }
      });
    }

    function resetChart() {
      chartInstance.update({
        component: 'chart',
        key: 'my-chart',
        props: {
          id: 'sales-chart',
          title: 'Quarterly Sales',
          chartType: 'bar',
          data: [
            {
              name: 'Product A',
              data: [
                { x: 'Q1', y: 30000 },
                { x: 'Q2', y: 45000 },
                { x: 'Q3', y: 60000 },
                { x: 'Q4', y: 55000 }
              ]
            },
            {
              name: 'Product B',
              data: [
                { x: 'Q1', y: 25000 },
                { x: 'Q2', y: 35000 },
                { x: 'Q3', y: 40000 },
                { x: 'Q4', y: 50000 }
              ]
            }
          ],
          width: 700,
          height: 400,
          themeColor: 'multi',
          legendPosition: 'bottom'
        }
      });
    }

    // Cleanup
    function unmountAll() {
      renderer.unmountAll();
    }

    function remountAll() {
      mountAll();
    }

    // Initialize all components on page load
    populateCodeDisplays();
    mountAll();
  </script>
</body>
</html>

